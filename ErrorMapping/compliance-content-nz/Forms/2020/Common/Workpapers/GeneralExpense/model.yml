---
name: Expense
model:
  fields:
    ExList:
      type: list
      fields: 
        Date:
          type: date
        Description:
          type: text
        GrossAmount:
          type: number
        GSTRate:
          type: number
          defaultValue: '15'
        GSTAmount:
          type: number
          value: = ExList#CURR#GrossAmount * (ExList#CURR#GSTRate / (100 + ExList#CURR#GSTRate))
        NetAmount:
          type: number
          value: = ExList#CURR#GrossAmount - ExList#CURR#GSTAmount
    TotalGrossAmount:
      type: number
      value: = SUM(ExList:GrossAmount)
    TotalGSTAmount:
      type: number
      value: = SUM(ExList:GSTAmount)
    TotalNetAmount:
      type: number
      value: = SUM(ExList:NetAmount)
    LedgerDetails:
      type: list
      fields:
        AccountName:
          type: text
    AccountNameFromList:
      type: text
      value: = LedgerDetails:AccountName
    LedgerAmounts:
      type: list
      fields:
        AccountName:
          type: text
          value: = AccountNameFromList
        AccountCode:
          type: text
        Balance:
          type: number
    # LedgerAmounts:
    #   type: list
    #   fields:
    #     AccountCode:
    #       type: text
    #     Balance:
    #       type: number
    TotalBalance:
      type: number
      value: '=SUM(LedgerAmounts:Balance)'
    Variance:
      type: number
      value: '=TotalNetAmount - TotalBalance'
    
    NotesList:
      type: list
      fields:
        Note:
          type: textArea

