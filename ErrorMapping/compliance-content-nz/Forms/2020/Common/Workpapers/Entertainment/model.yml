---
name: Entertainment
model:
  fields:
    GridList:
      type: list
      fields: 
        Date:
          type: date
        InvoiceNo:
          type: text
        Description:
          type: text
        GrossAmount:
          type: number
        PercentageDeductible:
          type: number
#          defaultValue: '50'
        DeductibleAmount:
          type: number
          value: = ROUND(GridList#CURR#GrossAmount * GridList#CURR#PercentageDeductible / 100,2)
        NonDeductibleAmount:
          type: number
          value: = GridList#CURR#GrossAmount - GridList#CURR#DeductibleAmount
    TotalGrossAmount:
      type: number
      value: = SUM(GridList:GrossAmount)
    TotalDeductibleAmount:
      type: number
      value: = SUM(GridList:DeductibleAmount)
    TotalNonDeductibleAmount:
      type: number
      value: = SUM(GridList:NonDeductibleAmount)
    GSTRate:
      type: number
      defaultValue: '15'
    GSTAmount:
      type: number
      value: = TotalDeductibleAmount * (GSTRate / (100 + GSTRate))
    NetAmount:
      type: number
      value: = TotalDeductibleAmount - GSTAmount

    LedgerDetails:
      type: list
      fields:
        AccountName:
          type: text
    AccountNameFromList:
      type: text
      value: = LedgerDetails:AccountName
    LedgerAmounts:
      type: list
      fields:
        AccountName:
          type: text
          value: = AccountNameFromList
        AccountCode:
          type: text
        Balance:
          type: number
    TotalBalance:
      type: number
      value: '=SUM(LedgerAmounts:Balance)'
    Variance:
      type: number
      value: '=NetAmount - TotalBalance'

    AdjustmentRequired:
      type: boolean
      defaultValue: true
    GSTAdjustment:
      type: number
      value: = IF(
                  AdjustmentRequired,
                  TotalNonDeductibleAmount * (GSTRate/(100+GSTRate)),
                  0)

    NotesList:
      type: list
      fields:
        Note:
          type: textArea

