---
name: Home office expenses
model:
  fields:
    AreaofOffice:
      type: number
      defaultValue: '0'
    AreaofHome:
      type: number
      defaultValue: '0'
    ClaimablePercentage:
      type: number
      value: = IF(AreaofHome=0,0,AreaofOffice / AreaofHome * 100)
    UseSquareMetreRate:
      type: boolean
      defaultValue: FALSE
    AreaofOffice2:
      type: number
      value: = AreaofOffice
    
    SquareMetreRate:
      type: number
      value: = 41.70
    ClaimperSquareMetre:
      type: number
      value: = ROUND(AreaofOffice * SquareMetreRate,2)

    InterestGross:
      type: number
    InterestClaimable:
      type: number  
      value: = ROUND(InterestGross * ClaimablePercentage / 100,2)
    InterestNet:
      type: number
      value: = InterestClaimable
    RatesGross: 
      type: number
    RatesClaimable:
      type: number
      value: = ROUND(RatesGross * ClaimablePercentage / 100,2)
    RatesGSTRate:
      type: number
      defaultValue: '15'
    RatesGST:
      type: number
      value: = ROUND(RatesClaimable * (RatesGSTRate / (100 + RatesGSTRate)),2)
    RatesNet:
      type: number
      value: = RatesClaimable - RatesGST
    RentGross: 
      type: number
    RentClaimable:
      type: number
      value: = ROUND(RentGross * ClaimablePercentage / 100,2)
    RentGSTRate:
      type: number
      defaultValue: '0'
    RentGST:
      type: number
      value: = ROUND(RentClaimable * (RentGSTRate / (100 + RentGSTRate)),2)
    RentNet:
      type: number
      value: = RentClaimable - RentGST

    RandMGross: 
      type: number
    RandMClaimable:
      type: number
      value: = ROUND(RandMGross * ClaimablePercentage / 100,2)
    RandMGSTRate:
      type: number
      defaultValue: '15'
    RandMGST:
      type: number
      value: = ROUND(RandMClaimable * (RandMGSTRate / (100 + RandMGSTRate)),2)
    RandMNet:
      type: number
      value: = RandMClaimable - RandMGST
    UtilitiesGross: 
      type: number
    UtilitiesClaimable:
      type: number
      value: = ROUND(UtilitiesGross * ClaimablePercentage / 100,2)
    UtilitiesGSTRate:
      type: number
      defaultValue: '15'
    UtilitiesGST:
      type: number
      value: = ROUND(UtilitiesClaimable * (UtilitiesGSTRate / (100 + UtilitiesGSTRate)),2)
    UtilitiesNet:
      type: number
      value: = UtilitiesClaimable - UtilitiesGST

    ClaimableList:
      type: list
      fields:
        Description:
          type: text
        Gross:
          type: number
        Claimable:
          type: number
          value: = ROUND(ClaimableList#CURR#Gross * ClaimablePercentage / 100,2)
        GSTRate:
          type: number
#          defaultValue: '15'
        GSTAmount:
          type: number
          value: = ROUND(ClaimableList#CURR#Claimable * (ClaimableList#CURR#GSTRate / (100 + ClaimableList#CURR#GSTRate)),2)
        ClaimableNet:
          type: number
          value: = ClaimableList#CURR#Claimable - ClaimableList#CURR#GSTAmount        

    TotalClaimableGross:
      type: number
      value: = IF(UseSquareMetreRate, 
                InterestGross + RatesGross + RentGross,
                InterestGross + RatesGross + RentGross + RandMGross + UtilitiesGross
                  + SUM(ClaimableList:Gross)
                )
    TotalClaimableClaimable:
      type: number
      value: = IF(UseSquareMetreRate,
                InterestClaimable + RatesClaimable + RentClaimable,
                InterestClaimable + RatesClaimable + RentClaimable + RandMClaimable + UtilitiesClaimable
                  + SUM(ClaimableList:Claimable)
                )
    TotalClaimableGST:
      type: number
      value: = IF(UseSquareMetreRate,
                RatesGST + RentGST,
                RatesGST + RentGST + RandMGST + UtilitiesGST
                  + SUM(ClaimableList:GSTAmount)
                )

    TotalClaimforBusinessUse:
      type: number
      value: 
        = IF(UseSquareMetreRate, 
            InterestNet + RatesNet + RentNet,
            InterestNet + RatesNet + RentNet + RandMNet + UtilitiesNet
              + SUM(ClaimableList:ClaimableNet)
            )

    TelephoneGross:
      type: number
    TelephonePercentageClaimable:
      type: number
    TelephoneClaimable:
      type: number
      value: = ROUND(TelephoneGross * TelephonePercentageClaimable / 100,2)
    TelephoneGSTRate:
      type: number
    TelephoneGST:
      type: number
      value: = ROUND(TelephoneClaimable * (TelephoneGSTRate / (100 + TelephoneGSTRate)),2)
    TelephoneNet:
      type: number
      value: = TelephoneClaimable - TelephoneGST

    OtherList:
      type: list
      fields:
        Description:
          type: text
        Gross:
          type: number
        ClaimablePercentage:
          type: number
        Claimable:
          type: number
          value: = ROUND(OtherList#CURR#Gross * OtherList#CURR#ClaimablePercentage / 100,2)
        GSTRate:
          type: number
          defaultValue: '15'
        GSTAmount:
          type: number
          value: = ROUND(OtherList#CURR#Claimable * (OtherList#CURR#GSTRate / (100 + OtherList#CURR#GSTRate)),2)
        ClaimableNet:
          type: number
          value: = OtherList#CURR#Claimable - OtherList#CURR#GSTAmount     
    TotalOtherGross:
      type: number
      value: = TelephoneGross + SUM(OtherList:Gross)
    TotalOtherClaimable:
      type: number
      value: = TelephoneClaimable + SUM(OtherList:Claimable)
    TotalOtherGST:
      type: number
      value: = TelephoneGST + SUM(OtherList:GSTAmount)
    TotalOtherNet:
      type: number
      value: = TelephoneNet + SUM(OtherList:ClaimableNet)


  
    TotalHomeOfficeClaim:
      type: number
      value: 
        = IF(UseSquareMetreRate,
          ClaimperSquareMetre + TotalClaimforBusinessUse + TotalOtherNet,
          TotalClaimforBusinessUse + TotalOtherNet
          )

    LedgerDetails:
      type: list
      fields:
        AccountName:
          type: text
    AccountNameFromList:
      type: text
      value: = LedgerDetails:AccountName
    LedgerAmounts:
      type: list
      fields:
        AccountName:
          type: text
          value: = AccountNameFromList
        AccountCode:
          type: text
        Balance:
          type: number    

    # LedgerAmounts:
    #   type: list
    #   fields:
    #     AccountCode:
    #       type: text
    #     Balance:
    #       type: number

    TotalBalance:
      type: number
      value: '=SUM(LedgerAmounts:Balance)'
    Variance:
      type: number
      value: '= TotalHomeOfficeClaim - TotalBalance'

    NotesList:
      type: list
      fields:
        Note:
          type: textArea
