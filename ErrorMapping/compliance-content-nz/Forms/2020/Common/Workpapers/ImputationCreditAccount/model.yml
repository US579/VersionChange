---
name: Imputation credit account reconciliation
model:
  fields:
    OpeningBalance1:
      type: number
    Year1:
      type: number
    Year1a:
      type: number
      value: = Year1
    TaxPaid1:
      type: number
    RWTPaid1:
      type: number
    DWTPaid1:
      type: number
    ICsOnDividendsReceived1:
      type: number
    OtherCredits1:
      type: number
    TotalCredits1:
      type: number
      value: = 
            TaxPaid1
          + RWTPaid1
          + DWTPaid1
          + ICsOnDividendsReceived1
          + OtherCredits1
    TaxRefunded1:
      type: number
    ICsOnDividendsPaid1:
      type: number
    OtherDebits1:
      type: number
    TotalDebits1:
      type: number
      value: = 
              TaxRefunded1
            + ICsOnDividendsPaid1
            + OtherDebits1
    ClosingBalance1:
      type: number
      value: = 
              OpeningBalance1
            + TotalCredits1
            - TotalDebits1

    GridList:
      type: list
      fields: 
        Year:
          type: number
          value: = IF(ISFIRSTROW(),Year1+1,GridList#CURR-1#Year + 1)
        OpeningBalance:
          type: number
          value: = IF(ISFIRSTROW(),ClosingBalance1,GridList#CURR-1#ClosingBalance)
        TaxPaid:
          type: number
        RWTPaid:
          type: number
        DWTPaid:
          type: number
        ICsOnDividendsReceived:
          type: number
        OtherCredits:
          type: number
        TotalCredits:
          type: number
          value: = 
                GridList#CURR#TaxPaid
              + GridList#CURR#RWTPaid
              + GridList#CURR#DWTPaid
              + GridList#CURR#ICsOnDividendsReceived
              + GridList#CURR#OtherCredits
        TaxRefunded:
          type: number
        ICsOnDividendsPaid:
          type: number
        OtherDebits:
          type: number
        TotalDebits:
          type: number
          value: = 
                  GridList#CURR#TaxRefunded
                + GridList#CURR#ICsOnDividendsPaid
                + GridList#CURR#OtherDebits
        ClosingBalance:
          type: number
          value: = 
                  GridList#CURR#OpeningBalance
                + GridList#CURR#TotalCredits
                - GridList#CURR#TotalDebits


    FinalClosingBalance:
      type: number

    LedgerDetails:
      type: list
      fields:
        AccountName:
          type: text
    AccountNameFromList:
      type: text
      value: = LedgerDetails:AccountName
    LedgerAmounts:
      type: list
      fields:
        AccountName:
          type: text
          value: = AccountNameFromList
        AccountCode:
          type: text
        Balance:
          type: number

    TotalBalance:
      type: number
      value: '=SUM(LedgerAmounts:Balance)'
    Variance:
      type: number
      value: = FinalClosingBalance - TotalBalance

    NotesList:
      type: list
      fields:
        Note:
          type: textArea
