---
name: Dividend income
model:
  fields:
    dividendsList:
      type: list
      fields: 
        Description:
          type: text
        Date:
          type: date
        Imputation:
          type: number
        WithholdingTax:
          type: number
        GrossDividend:
          type: number
        NetDividend:
          type: number
          value: = dividendsList#CURR#GrossDividend - dividendsList#CURR#Imputation
        AmountReceived:
          type: number
          value: = dividendsList#CURR#GrossDividend - dividendsList#CURR#WithholdingTax - dividendsList#CURR#Imputation
        TaxPercentage:
          type: number
          value: = (dividendsList#CURR#WithholdingTax + dividendsList#CURR#Imputation) / dividendsList#CURR#GrossDividend * 100
    TotalImputation:
      type: number
      value: = SUM(dividendsList:Imputation)
    TotalWithholdingTax:
      type: number
      value: = SUM(dividendsList:WithholdingTax)
    TotalGrossDividend:
      type: number
      value: = SUM(dividendsList:GrossDividend)
    TotalNetDividend:
      type: number
      value: = SUM(dividendsList:NetDividend)
    TotalAmountReceived:
      type: number
      value: = SUM(dividendsList:AmountReceived)
    TotalPercentage:
      type: number
      value: = IF(TotalGrossDividend=0,0,(TotalImputation + TotalWithholdingTax) / TotalGrossDividend * 100)
    GrossorNet:
      type: select
      defaultValue: gross
      options:
        - value: gross
          label: Gross
        - value: net
          label: Net
    
    LedgerDetails:
      type: list
      fields:
        AccountName:
          type: text
    AccountNameFromList:
      type: text
      value: = LedgerDetails:AccountName
    LedgerAmounts:
      type: list
      fields:
        AccountName:
          type: text
          value: = AccountNameFromList
        AccountCode:
          type: text
        Balance:
          type: number
    TotalBalance:
      type: number
      value: '=SUM(LedgerAmounts:Balance)'
    Variance:
      type: number
      value: '=IF(GrossorNet="gross",TotalGrossDividend + TotalBalance,TotalNetDividend + TotalBalance)'

    NotesList:
      type: list
      fields:
        Note:
          type: textArea


