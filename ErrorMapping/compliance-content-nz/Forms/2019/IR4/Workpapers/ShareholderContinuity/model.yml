---
name: Shareholder Continuity
model:
  fields:
    DateofChange:
      type: date
    GridList:
      type: list
      fields:
        ShareholderName:
          type: text
        SharesBefore:
          type: number
        PercentageBefore:
          type: number
          value: = IF(TotalSharesBefore = 0,
            0,
            ROUND(GridList#CURR#SharesBefore / TotalSharesBefore * 100,2)
            )
        SharesAfter:
          type: number
        PercentageAfter:
          type: number
          value: = IF(TotalSharesAfter = 0,
            0,
            ROUND(GridList#CURR#SharesAfter / TotalSharesAfter * 100,2)
            )
        MinimumHolding:
          type: number
          value: = IF(
            GridList#CURR#PercentageBefore < GridList#CURR#PercentageAfter,
            GridList#CURR#PercentageBefore,
            GridList#CURR#PercentageAfter
            )

    TotalSharesBefore:
      type: number
      value: "=SUM(GridList:SharesBefore)"
    TotalPercentageBefore:
      type: number
      value: =SUM(GridList:PercentageBefore)
    TotalSharesAfter:
      type: number
      value: "=SUM(GridList:SharesAfter)"
    TotalPercentageAfter:
      type: number
      value: =SUM(GridList:PercentageAfter)
    TotalMinimumHolding:
      type: number
      value: =SUM(GridList:MinimumHolding)
